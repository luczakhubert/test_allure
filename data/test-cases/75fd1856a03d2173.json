{"uid":"75fd1856a03d2173","name":"Strona główna","fullName":"tests.pozioma_A.test_pytanie_33#test_pytanie_33","historyId":"52b85f9446964da51ce070336bd83fa2","time":{"start":1717246427096,"stop":1717246433070,"duration":5974},"description":"Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.","descriptionHtml":"<p>Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.</p>\n","status":"failed","statusMessage":"AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\n  • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\n  • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\n  \nassert False","statusTrace":"main_page_objects = <pages.main_page_objects.MainPageObjects object at 0x0000013544E7F5F0>, browser = <Page url='https://cui.wroclaw.pl/'>\n\n    @allure.suite(\n        '33. Czy tabele, które prezentują dane, posiadają odpowiednio zdefiniowane nagłówki, które są połączone z danymi?')\n    @allure.title(\"Strona główna\")\n    @allure.description(\"Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.\")\n    @allure.tag(\"Poziom A\")\n    @allure.tag(\"Kryterium 1.3.1\")\n    @allure.link(\"https://cui.wroclaw.pl/\")\n    def test_pytanie_33(main_page_objects, browser):\n        with allure.step(\"Wejście na stronę główną.\"):\n            main_page_objects.goto()\n            screenshot_dir = \"screens\"\n            if not os.path.exists(screenshot_dir):\n                os.makedirs(screenshot_dir)\n    \n        with allure.step(\"Zweryfikowanie czy na stronie są tabele\"):\n            tables = main_page_objects.TABLES.find_all_elements(browser)\n    \n        browser.add_script_tag(url='https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.2.3/axe.min.js')\n        if tables:\n            errors = []\n            for index, table in enumerate(tables):\n                individual_errors = []\n                with allure.step(f\"Zweryfikowanie tabeli {index + 1}\"):\n                    table_html = browser.evaluate('''(table) => {\n                        return table.outerHTML;\n                    }''', table)\n    \n                    result = browser.evaluate('''async (table) => {\n                        const { axe } = window;\n                        const results = await axe.run(table);\n                        return results.violations;\n                    }''', table)\n    \n                    if len(result) > 0:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(\n                            f\"Nie wszystkie nagłówki kolumn lub linii zdefiniowane są w znacznikach <th> lub <td>.\")\n    \n                    scope_check = browser.evaluate('''(table) => {\n                        const headers = table.querySelectorAll('th');\n                        for (const header of headers) {\n                            if (!header.hasAttribute('scope')) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    }''', table)\n    \n                    if not scope_check:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_bez_scope_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(f\"Niektóre nagłówki <th> w tabeli {index + 1} nie mają atrybutu <scope>.\")\n    \n                if individual_errors:\n                    error_message = f\"Tabela {index + 1}:\\n\" + \"\\n\".join(individual_errors)\n                    allure.attach(error_message, name=f\"Błąd tabeli {index + 1}\", attachment_type=allure.attachment_type.TEXT)\n                    errors.append(error_message)\n    \n            if errors:\n                main_error_message = (\n                    \"Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i \"\n                    \"połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\\n\"\n                    \"• wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\\n\"\n                    \"• odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub \"\n                    \"<scope>.\\n\"\n                )\n>               assert False, main_error_message\nE               AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\nE                 • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\nE                 • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\nE                 \nE               assert False\n\ntests\\pozioma_A\\test_pytanie_33.py:75: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"browser","time":{"start":1717246426525,"stop":1717246427096,"duration":571},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"main_page_objects","time":{"start":1717246427096,"stop":1717246427096,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"testStage":{"description":"Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.","status":"failed","statusMessage":"AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\n  • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\n  • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\n  \nassert False","statusTrace":"main_page_objects = <pages.main_page_objects.MainPageObjects object at 0x0000013544E7F5F0>, browser = <Page url='https://cui.wroclaw.pl/'>\n\n    @allure.suite(\n        '33. Czy tabele, które prezentują dane, posiadają odpowiednio zdefiniowane nagłówki, które są połączone z danymi?')\n    @allure.title(\"Strona główna\")\n    @allure.description(\"Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.\")\n    @allure.tag(\"Poziom A\")\n    @allure.tag(\"Kryterium 1.3.1\")\n    @allure.link(\"https://cui.wroclaw.pl/\")\n    def test_pytanie_33(main_page_objects, browser):\n        with allure.step(\"Wejście na stronę główną.\"):\n            main_page_objects.goto()\n            screenshot_dir = \"screens\"\n            if not os.path.exists(screenshot_dir):\n                os.makedirs(screenshot_dir)\n    \n        with allure.step(\"Zweryfikowanie czy na stronie są tabele\"):\n            tables = main_page_objects.TABLES.find_all_elements(browser)\n    \n        browser.add_script_tag(url='https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.2.3/axe.min.js')\n        if tables:\n            errors = []\n            for index, table in enumerate(tables):\n                individual_errors = []\n                with allure.step(f\"Zweryfikowanie tabeli {index + 1}\"):\n                    table_html = browser.evaluate('''(table) => {\n                        return table.outerHTML;\n                    }''', table)\n    \n                    result = browser.evaluate('''async (table) => {\n                        const { axe } = window;\n                        const results = await axe.run(table);\n                        return results.violations;\n                    }''', table)\n    \n                    if len(result) > 0:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(\n                            f\"Nie wszystkie nagłówki kolumn lub linii zdefiniowane są w znacznikach <th> lub <td>.\")\n    \n                    scope_check = browser.evaluate('''(table) => {\n                        const headers = table.querySelectorAll('th');\n                        for (const header of headers) {\n                            if (!header.hasAttribute('scope')) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    }''', table)\n    \n                    if not scope_check:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_bez_scope_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(f\"Niektóre nagłówki <th> w tabeli {index + 1} nie mają atrybutu <scope>.\")\n    \n                if individual_errors:\n                    error_message = f\"Tabela {index + 1}:\\n\" + \"\\n\".join(individual_errors)\n                    allure.attach(error_message, name=f\"Błąd tabeli {index + 1}\", attachment_type=allure.attachment_type.TEXT)\n                    errors.append(error_message)\n    \n            if errors:\n                main_error_message = (\n                    \"Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i \"\n                    \"połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\\n\"\n                    \"• wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\\n\"\n                    \"• odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub \"\n                    \"<scope>.\\n\"\n                )\n>               assert False, main_error_message\nE               AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\nE                 • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\nE                 • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\nE                 \nE               assert False\n\ntests\\pozioma_A\\test_pytanie_33.py:75: AssertionError","steps":[{"name":"Wejście na stronę główną.","time":{"start":1717246427097,"stop":1717246432382,"duration":5285},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"Zweryfikowanie czy na stronie są tabele","time":{"start":1717246432382,"stop":1717246432401,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"Zweryfikowanie tabeli 1","time":{"start":1717246432752,"stop":1717246433070,"duration":318},"status":"passed","steps":[],"attachments":[{"uid":"5ca50bb3e63cb436","name":"Screenshot tabeli 1","source":"5ca50bb3e63cb436.png","type":"image/png","size":10251}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false,"stepsCount":0}],"attachments":[{"uid":"9298618460882d0a","name":"Błąd tabeli 1","source":"9298618460882d0a.txt","type":"text/plain","size":74}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false,"stepsCount":3},"afterStages":[{"name":"browser::0","time":{"start":1717246433075,"stop":1717246433244,"duration":169},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"labels":[{"name":"tag","value":"Kryterium 1.3.1"},{"name":"tag","value":"Poziom A"},{"name":"suite","value":"33. Czy tabele, które prezentują dane, posiadają odpowiednio zdefiniowane nagłówki, które są połączone z danymi?"},{"name":"parentSuite","value":"tests.pozioma_A"},{"name":"host","value":"Hubert"},{"name":"thread","value":"17800-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.pozioma_A.test_pytanie_33"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"https://cui.wroclaw.pl/","url":"https://cui.wroclaw.pl/","type":"link"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["Poziom A","Kryterium 1.3.1"]},"source":"75fd1856a03d2173.json","parameterValues":[]}