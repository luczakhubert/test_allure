{"name": "Strona główna", "status": "failed", "statusDetails": {"message": "AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\n  • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\n  • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\n  \nassert False", "trace": "main_page_objects = <pages.main_page_objects.MainPageObjects object at 0x0000013544E7F5F0>, browser = <Page url='https://cui.wroclaw.pl/'>\n\n    @allure.suite(\n        '33. Czy tabele, które prezentują dane, posiadają odpowiednio zdefiniowane nagłówki, które są połączone z danymi?')\n    @allure.title(\"Strona główna\")\n    @allure.description(\"Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.\")\n    @allure.tag(\"Poziom A\")\n    @allure.tag(\"Kryterium 1.3.1\")\n    @allure.link(\"https://cui.wroclaw.pl/\")\n    def test_pytanie_33(main_page_objects, browser):\n        with allure.step(\"Wejście na stronę główną.\"):\n            main_page_objects.goto()\n            screenshot_dir = \"screens\"\n            if not os.path.exists(screenshot_dir):\n                os.makedirs(screenshot_dir)\n    \n        with allure.step(\"Zweryfikowanie czy na stronie są tabele\"):\n            tables = main_page_objects.TABLES.find_all_elements(browser)\n    \n        browser.add_script_tag(url='https://cdnjs.cloudflare.com/ajax/libs/axe-core/4.2.3/axe.min.js')\n        if tables:\n            errors = []\n            for index, table in enumerate(tables):\n                individual_errors = []\n                with allure.step(f\"Zweryfikowanie tabeli {index + 1}\"):\n                    table_html = browser.evaluate('''(table) => {\n                        return table.outerHTML;\n                    }''', table)\n    \n                    result = browser.evaluate('''async (table) => {\n                        const { axe } = window;\n                        const results = await axe.run(table);\n                        return results.violations;\n                    }''', table)\n    \n                    if len(result) > 0:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(\n                            f\"Nie wszystkie nagłówki kolumn lub linii zdefiniowane są w znacznikach <th> lub <td>.\")\n    \n                    scope_check = browser.evaluate('''(table) => {\n                        const headers = table.querySelectorAll('th');\n                        for (const header of headers) {\n                            if (!header.hasAttribute('scope')) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    }''', table)\n    \n                    if not scope_check:\n                        screenshot_path = os.path.join(screenshot_dir, f\"tabela_bez_scope_{index + 1}.png\")\n                        table.screenshot(path=screenshot_path)\n                        allure.attach.file(screenshot_path, name=f\"Screenshot tabeli {index + 1}\",\n                                           attachment_type=allure.attachment_type.PNG)\n                        individual_errors.append(f\"Niektóre nagłówki <th> w tabeli {index + 1} nie mają atrybutu <scope>.\")\n    \n                if individual_errors:\n                    error_message = f\"Tabela {index + 1}:\\n\" + \"\\n\".join(individual_errors)\n                    allure.attach(error_message, name=f\"Błąd tabeli {index + 1}\", attachment_type=allure.attachment_type.TEXT)\n                    errors.append(error_message)\n    \n            if errors:\n                main_error_message = (\n                    \"Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i \"\n                    \"połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\\n\"\n                    \"• wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\\n\"\n                    \"• odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub \"\n                    \"<scope>.\\n\"\n                )\n>               assert False, main_error_message\nE               AssertionError: Na stronie znajdują się tabele prezentujące dane. Nie są one jednak poprawnie zdefiniowane i połączone z danymi. Każda tabela powinna spełniać poniższe wymagania:\nE                 • wszystkie nagłówki (kolumn lub linii) zdefiniowane są w znacznikach <th> lub <td>,\nE                 • odpowiadające nagłówkom komórki tabel są połączone z nimi za pomocą atrybutu <headers> lub <scope>.\nE                 \nE               assert False\n\ntests\\pozioma_A\\test_pytanie_33.py:75: AssertionError"}, "description": "Test sprawdza, czy tabele na stronie są poprawnie opisane w kodzie.", "steps": [{"name": "Wejście na stronę główną.", "status": "passed", "start": 1717246427097, "stop": 1717246432382}, {"name": "Zweryfikowanie czy na stronie są tabele", "status": "passed", "start": 1717246432382, "stop": 1717246432401}, {"name": "Zweryfikowanie tabeli 1", "status": "passed", "attachments": [{"name": "Screenshot tabeli 1", "source": "1d872653-ad0f-4d1d-8c1e-1676f1cd7604-attachment.png", "type": "image/png"}], "start": 1717246432752, "stop": 1717246433070}], "attachments": [{"name": "Błąd tabeli 1", "source": "0cd0530f-c512-433f-9fe9-777831ca1d1f-attachment.txt", "type": "text/plain"}], "start": 1717246427096, "stop": 1717246433070, "uuid": "f6690acf-18cc-43f1-b2d0-201633f128fb", "historyId": "52b85f9446964da51ce070336bd83fa2", "testCaseId": "52b85f9446964da51ce070336bd83fa2", "fullName": "tests.pozioma_A.test_pytanie_33#test_pytanie_33", "labels": [{"name": "tag", "value": "Kryterium 1.3.1"}, {"name": "tag", "value": "Poziom A"}, {"name": "suite", "value": "33. Czy tabele, które prezentują dane, posiadają odpowiednio zdefiniowane nagłówki, które są połączone z danymi?"}, {"name": "parentSuite", "value": "tests.pozioma_A"}, {"name": "host", "value": "Hubert"}, {"name": "thread", "value": "17800-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.pozioma_A.test_pytanie_33"}], "links": [{"type": "link", "url": "https://cui.wroclaw.pl/", "name": "https://cui.wroclaw.pl/"}]}